# Supabase認証のセットアップ

## 環境変数の設定

プロジェクトルートに `.env.local` ファイルを作成し、以下の内容を追加してください：

```
NEXT_PUBLIC_SUPABASE_URL=https://rqzzpdmawtbrvmuddckz.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxenpwZG1hd3RicnZtdWRkY2t6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2Mzk4MjIsImV4cCI6MjA4MDIxNTgyMn0.hmjAnvWSJ5UZfMlvXm2-RAhCVioDXsSeuZoaY864Voc
```

※ 注意: 環境変数ファイルが作成できない場合でも、コード内にデフォルト値が設定されているため、そのまま動作します。

## 認証機能

### ログイン
- `/login` にアクセスして、メールアドレスとパスワードでログインできます。
- ログイン後は自動的にダッシュボード（`/notices`）にリダイレクトされます。

### 新規登録
- `/signup` にアクセスして、新しいアカウントを作成できます。
- 登録後、確認メールが送信されます（メール確認が有効な場合）。
- 登録完了後、ログインページにリダイレクトされます。

### ログアウト
- ヘッダーのログアウトアイコン（LogOut）をクリックすると、ログアウトできます。
- ログアウト後、ログインページにリダイレクトされます。

### 認証保護
- 未認証のユーザーがアプリにアクセスしようとすると、自動的にログインページにリダイレクトされます。
- ログイン済みのユーザーがログイン/サインアップページにアクセスすると、ダッシュボードにリダイレクトされます。

## 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:3000` にアクセスすると、自動的にログインページにリダイレクトされます。

## テストアカウントの作成

1. `/signup` にアクセス
2. メールアドレスとパスワードを入力
3. 「登録」ボタンをクリック
4. 登録完了後、ログインページでログイン

## トラブルシューティング

### ログインできない場合
- メールアドレスとパスワードが正しいか確認してください。
- Supabaseプロジェクトで認証プロバイダー（Email）が有効になっているか確認してください。

### 新規登録できない場合
- パスワードが6文字以上であることを確認してください。
- メールアドレスの形式が正しいか確認してください。

### セッションが維持されない場合
- ブラウザのクッキーが有効になっているか確認してください。
- ローカルストレージが有効になっているか確認してください。

